<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventure Quest - Videojuego</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #1A1B41;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            position: relative;
        }

        .nav-buttons {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .nav-button {
            background-color: #2A2B51;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            border-radius: 5px;
            margin-left: 10px;
            transition: background-color 0.3s ease;
        }

        .nav-button:hover {
            background-color: #3A3B61;
        }

        .banner {
            text-align: center;
            background-color: #1A1B41;
            padding: 40px 0;
            color: white;
        }

        .banner h1 {
            font-size: 48px;
            margin: 0;
            font-family: 'Arial Black', Arial, sans-serif;
        }

        .banner p {
            font-size: 20px;
            margin: 20px 0;
        }

        section {
            padding: 40px 20px;
            text-align: center;
        }

        section h2 {
            color: #1A1B41;
            font-size: 32px;
            margin-bottom: 20px;
        }

        section p {
            color: #555;
            font-size: 18px;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .canvas-container {
            background-color: #1A1B41;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 900px;
        }

        canvas {
            border: 3px solid white;
            border-radius: 5px;
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }

        .game-controls {
            text-align: center;
            margin: 20px 0;
        }

        .level-info {
            color: white;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }

        .secciones {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            flex-wrap: wrap;
            margin: 40px 0;
        }

        .seccion {
            width: 22%;
            min-width: 250px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-top: 5px solid #1A1B41;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .seccion:hover {
            transform: translateY(-5px);
            background-color: #f8f9fa;
        }

        .seccion h3 {
            color: #1A1B41;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .seccion p {
            font-size: 14px;
            text-align: left;
        }

        button {
            background-color: #1A1B41;
            color: white;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            margin: 10px;
        }

        button:hover {
            background-color: #2A2B51;
        }

        .game-button {
            padding: 10px 20px;
            font-size: 14px;
            margin: 5px;
        }

        footer {
            background-color: #1A1B41;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
        }

        footer a {
            color: white;
            margin: 0 10px;
            text-decoration: none;
            font-size: 18px;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .secciones {
                flex-direction: column;
                align-items: center;
            }
            
            .seccion {
                width: 90%;
            }
            
            .banner h1 {
                font-size: 32px;
            }
            
            .nav-buttons {
                position: static;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>

<header>
    Adventure Quest
    <div class="nav-buttons">
        <button class="nav-button" onclick="showSection('home')">Inicio</button>
        <button class="nav-button" onclick="showSection('game')">Jugar</button>
    </div>
</header>

<div id="home-section">
    <div class="banner">
        <h1>Vive la Aventura</h1>
        <p>Un juego de plataformas lleno de desaf칤os y diversi칩n</p>
    </div>

    <section>
        <h2>Acerca del Juego</h2>
        <p>Adventure Quest es un emocionante juego de plataformas donde controlas a un personaje que debe superar obst치culos, saltar precipicios y alcanzar la meta en cada nivel. Usa las flechas del teclado para moverte y la barra espaciadora para saltar.</p>
        
        <button onclick="showSection('game')">JUGAR AHORA</button>
    </section>

    <section>
        <h2>Caracter칤sticas</h2>
        <div class="secciones">
            <div class="seccion">
                <h3>M칰ltiples Niveles</h3>
                <p>3 niveles 칰nicos con diferentes fondos, enemigos y desaf칤os progresivos.</p>
            </div>
            <div class="seccion">
                <h3>Controles Simples</h3>
                <p>F치cil de aprender, dif칤cil de dominar. Usa las flechas para moverte y espacio para saltar.</p>
            </div>
            <div class="seccion">
                <h3>Enemigos Din치micos</h3>
                <p>Cada nivel presenta enemigos 칰nicos con diferentes patrones de movimiento.</p>
            </div>
            <div class="seccion">
                <h3>Plataformas Desafiantes</h3>
                <p>El nivel 3 incluye plataformas elevadas que requieren saltos precisos.</p>
            </div>
        </div>
    </section>
</div>

<div id="game-section" class="hidden">
    <section>
        <div class="canvas-container">
            <div class="level-info" id="levelInfo">Nivel 1 - Bosque M치gico</div>
            <canvas id="gameCanvas" width="800" height="400"></canvas>
            <div class="game-controls">
                <p style="color: white; margin: 15px 0;">Usa las flechas y ESPACIO para jugar</p>
                <button class="game-button" onclick="resetGame()">Reiniciar Nivel</button>
                <button class="game-button" onclick="nextLevel()">Siguiente Nivel</button>
                <button class="game-button" onclick="prevLevel()">Nivel Anterior</button>
            </div>
        </div>
    </section>
</div>

<footer>
    <p>Adventure Quest 춸 2025</p>
    <a href="#" onclick="alert('Pr칩ximamente')">游닎 Contacto</a>
    <a href="#" onclick="alert('Pr칩ximamente')">游꿡 M치s Juegos</a>
    <a href="#" onclick="alert('Pr칩ximamente')">游닀 Tutorial</a>
</footer>

<script>
// Navegaci칩n entre secciones
function showSection(section) {
    const homeSection = document.getElementById('home-section');
    const gameSection = document.getElementById('game-section');
    
    if (section === 'home') {
        homeSection.classList.remove('hidden');
        gameSection.classList.add('hidden');
    } else if (section === 'game') {
        homeSection.classList.add('hidden');
        gameSection.classList.remove('hidden');
        if (!gameStarted) {
            iniciarJuego();
        }
    }
}

// Variables del juego
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const pisoY = canvas.height - 40;
let gameStarted = false;
let currentLevel = 1;

// Cargar im치genes
const imagenes = {
    fondos: {},
    personaje: new Image(),
    enemigos: {},
    plataformas: new Image(),
    meta: new Image()
};

let imagenesCargas = 0;
let totalImagenes = 0;

// Funci칩n para cargar im치genes - CORREGIDA con nombres exactos
function cargarImagenes() {
    // Cargar fondos - usando nombres exactos de tu repositorio
    imagenes.fondos[1] = new Image();
    imagenes.fondos[1].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/fondo1.png';
    imagenes.fondos[2] = new Image();
    imagenes.fondos[2].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/fondo2.png';
    imagenes.fondos[3] = new Image();
    imagenes.fondos[3].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/fondo3.png';
    
    // Cargar personaje
    imagenes.personaje.src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/personaje.png';
    
    // Cargar enemigos
    imagenes.enemigos[1] = new Image();
    imagenes.enemigos[1].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/enemigo1.png';
    imagenes.enemigos[2] = new Image();
    imagenes.enemigos[2].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/enemigo2.png';
    imagenes.enemigos[3] = new Image();
    imagenes.enemigos[3].src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/enemigo3.png';
    
    // Cargar meta
    imagenes.meta.src = 'https://github.com/Tatoallin/adventure-quest-game/raw/main/images/meta.png';
    
    // Contar total de im치genes
    totalImagenes = 8;
    
    // Agregar event listeners para verificar cuando se cargan
    Object.values(imagenes.fondos).forEach(img => {
        img.onload = () => {
            imagenesCargas++;
            verificarImagenesCargadas();
        };
        img.onerror = (e) => {
            console.warn('No se pudo cargar imagen de fondo:', e.target.src);
            imagenesCargas++;
            verificarImagenesCargadas();
        };
    });
    
    imagenes.personaje.onload = () => {
        imagenesCargas++;
        verificarImagenesCargadas();
    };
    imagenes.personaje.onerror = (e) => {
        console.warn('No se pudo cargar imagen del personaje:', e.target.src);
        imagenesCargas++;
        verificarImagenesCargadas();
    };
    
    Object.values(imagenes.enemigos).forEach(img => {
        img.onload = () => {
            imagenesCargas++;
            verificarImagenesCargadas();
        };
        img.onerror = (e) => {
            console.warn('No se pudo cargar imagen de enemigo:', e.target.src);
            imagenesCargas++;
            verificarImagenesCargadas();
        };
    });
    
    imagenes.meta.onload = () => {
        imagenesCargas++;
        verificarImagenesCargadas();
    };
    imagenes.meta.onerror = (e) => {
        console.warn('No se pudo cargar imagen de meta:', e.target.src);
        imagenesCargas++;
        verificarImagenesCargadas();
    };
}

function verificarImagenesCargadas() {
    if (imagenesCargas >= totalImagenes) {
        console.log('Todas las im치genes han sido procesadas');
    }
}

// Configuraci칩n de niveles - CORREGIDAS las posiciones y tama침os
const niveles = {
    1: {
        nombre: "Nivel 1 - Bosque M치gico",
        fondoColor: "#87CEEB",
        pisoColor: "#228B22",
        enemigos: [
            { x: 200, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 1, direccion: 1, rango: 100, inicialX: 200 },
            { x: 400, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 1.5, direccion: -1, rango: 80, inicialX: 400 }
        ],
        plataformas: []
    },
    2: {
        nombre: "Nivel 2 - Desierto Ardiente",
        fondoColor: "#F4A460",
        pisoColor: "#CD853F",
        enemigos: [
            { x: 150, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 2, direccion: 1, rango: 120, inicialX: 150 },
            { x: 350, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 1.8, direccion: -1, rango: 90, inicialX: 350 },
            { x: 550, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 1.2, direccion: 1, rango: 110, inicialX: 550 }
        ],
        plataformas: []
    },
    3: {
        nombre: "Nivel 3 - Monta침as Heladas",
        fondoColor: "#B0E0E6",
        pisoColor: "#708090",
        enemigos: [
            { x: 300, y: pisoY - 50, ancho: 50, alto: 50, velocidad: 0.8, direccion: 1, rango: 80, inicialX: 300 },
            { x: 200, y: pisoY - 170, ancho: 50, alto: 50, velocidad: 1.5, direccion: -1, rango: 100, inicialX: 200 }
        ],
        plataformas: [
            { x: 150, y: pisoY - 120, ancho: 150, alto: 20 },
            { x: 400, y: pisoY - 180, ancho: 120, alto: 20 },
            { x: 600, y: pisoY - 100, ancho: 100, alto: 20 }
        ]
    }
};

let personaje = {
    x: 50,
    y: pisoY - 60,
    ancho: 50,
    alto: 60,
    velocidadY: 0,
    gravedad: 0.8,
    fuerzaSalto: -15,
    enElAire: false,
    velocidadMovimiento: 4
};

let teclas = {
    izquierda: false,
    derecha: false
};

// Meta - ajustada al tama침o correcto
const meta = {
    x: 650,
    y: pisoY - 80,
    ancho: 60,
    alto: 80
};

// Event listeners
window.addEventListener("keydown", function(e) {
    if (e.code === "ArrowLeft") teclas.izquierda = true;
    if (e.code === "ArrowRight") teclas.derecha = true;
    if (e.code === "Space" && !personaje.enElAire) {
        personaje.velocidadY = personaje.fuerzaSalto;
        personaje.enElAire = true;
        e.preventDefault();
    }
});

window.addEventListener("keyup", function(e) {
    if (e.code === "ArrowLeft") teclas.izquierda = false;
    if (e.code === "ArrowRight") teclas.derecha = false;
});

function aplicarGravedad() {
    personaje.velocidadY += personaje.gravedad;
    personaje.y += personaje.velocidadY;

    // Colisi칩n con el piso
    if (personaje.y + personaje.alto >= pisoY) {
        personaje.y = pisoY - personaje.alto;
        personaje.velocidadY = 0;
        personaje.enElAire = false;
    }

    // Colisi칩n con plataformas (solo nivel 3)
    if (currentLevel === 3) {
        const plataformas = niveles[3].plataformas;
        for (let plat of plataformas) {
            if (personaje.x < plat.x + plat.ancho &&
                personaje.x + personaje.ancho > plat.x &&
                personaje.y + personaje.alto > plat.y &&
                personaje.y + personaje.alto < plat.y + plat.alto + 10 &&
                personaje.velocidadY > 0) {
                personaje.y = plat.y - personaje.alto;
                personaje.velocidadY = 0;
                personaje.enElAire = false;
            }
        }
    }
}

function moverPersonaje() {
    if (teclas.izquierda && personaje.x > 0) {
        personaje.x -= personaje.velocidadMovimiento;
    }
    if (teclas.derecha && personaje.x + personaje.ancho < canvas.width) {
        personaje.x += personaje.velocidadMovimiento;
    }
}

function moverEnemigos() {
    const enemigos = niveles[currentLevel].enemigos;
    for (let enemigo of enemigos) {
        enemigo.x += enemigo.velocidad * enemigo.direccion;
        
        // Cambiar direcci칩n al alcanzar los l칤mites del rango
        if (enemigo.x <= enemigo.inicialX - enemigo.rango || 
            enemigo.x >= enemigo.inicialX + enemigo.rango) {
            enemigo.direccion *= -1;
        }
    }
}

function detectarColisiones() {
    const enemigos = niveles[currentLevel].enemigos;
    for (let enemigo of enemigos) {
        if (personaje.x < enemigo.x + enemigo.ancho &&
            personaje.x + personaje.ancho > enemigo.x &&
            personaje.y < enemigo.y + enemigo.alto &&
            personaje.y + personaje.alto > enemigo.y) {
            // Reiniciar posici칩n al colisionar
            resetPlayerPosition();
        }
    }
}

function detectarMeta() {
    if (personaje.x < meta.x + meta.ancho &&
        personaje.x + personaje.ancho > meta.x &&
        personaje.y < meta.y + meta.alto &&
        personaje.y + personaje.alto > meta.y) {
        
        if (currentLevel < 3) {
            currentLevel++;
            resetPlayerPosition();
            updateLevelInfo();
            alert(`춰Nivel ${currentLevel - 1} completado! Avanzando al ${niveles[currentLevel].nombre}`);
        } else {
            alert("춰Felicitaciones! Has completado todos los niveles.");
            currentLevel = 1;
            resetPlayerPosition();
            updateLevelInfo();
        }
    }
}

function resetPlayerPosition() {
    personaje.x = 50;
    personaje.y = pisoY - personaje.alto;
    personaje.velocidadY = 0;
    personaje.enElAire = false;
}

function updateLevelInfo() {
    document.getElementById('levelInfo').textContent = niveles[currentLevel].nombre;
}

function dibujarJuego() {
    const nivel = niveles[currentLevel];
    
    // Limpiar canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Dibujar fondo
    const fondoImg = imagenes.fondos[currentLevel];
    if (fondoImg && fondoImg.complete && fondoImg.naturalWidth > 0) {
        ctx.drawImage(fondoImg, 0, 0, canvas.width, canvas.height);
    } else {
        // Fallback color si no se carga la imagen
        ctx.fillStyle = nivel.fondoColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    
    // Dibujar piso (mantener el color para el piso)
    ctx.fillStyle = nivel.pisoColor;
    ctx.fillRect(0, pisoY, canvas.width, canvas.height - pisoY);
    
    // Dibujar plataformas (solo nivel 3)
    if (currentLevel === 3) {
        for (let plat of nivel.plataformas) {
            ctx.fillStyle = "#696969";
            ctx.fillRect(plat.x, plat.y, plat.ancho, plat.alto);
        }
    }
    
    // Dibujar enemigos
    const enemigoImg = imagenes.enemigos[currentLevel];
    for (let enemigo of nivel.enemigos) {
        if (enemigoImg && enemigoImg.complete && enemigoImg.naturalWidth > 0) {
            ctx.drawImage(enemigoImg, enemigo.x, enemigo.y, enemigo.ancho, enemigo.alto);
        } else {
            // Fallback
            ctx.fillStyle = "#DC143C";
            ctx.fillRect(enemigo.x, enemigo.y, enemigo.ancho, enemigo.alto);
            
            // Ojos del enemigo (fallback)
            ctx.fillStyle = "white";
            ctx.fillRect(enemigo.x + 10, enemigo.y + 10, 8, 8);
            ctx.fillRect(enemigo.x + enemigo.ancho - 18, enemigo.y + 10, 8, 8);
        }
    }
    
    // Dibujar meta
    if (imagenes.meta.complete && imagenes.meta.naturalWidth > 0) {
        ctx.drawImage(imagenes.meta, meta.x, meta.y, meta.ancho, meta.alto);
    } else {
        // Fallback
        ctx.fillStyle = "#32CD32";
        ctx.fillRect(meta.x, meta.y, meta.ancho, meta.alto);
        
        // Bandera en la meta (fallback)
        ctx.fillStyle = "#FFD700";
        ctx.fillRect(meta.x + 20, meta.y, 20, 30);
    }
    
    // Dibujar personaje
    if (imagenes.personaje.complete && imagenes.personaje.naturalWidth > 0) {
        ctx.drawImage(imagenes.personaje, personaje.x, personaje.y, personaje.ancho, personaje.alto);
    } else {
        // Fallback
        ctx.fillStyle = "#1A1B41";
        ctx.fillRect(personaje.x, personaje.y, personaje.ancho, personaje.alto);
        
        // Ojos del personaje (fallback)
        ctx.fillStyle = "white";
        ctx.fillRect(personaje.x + 10, personaje.y + 15, 10, 10);
        ctx.fillRect(personaje.x + personaje.ancho - 20, personaje.y + 15, 10, 10);
    }
    
    // Instrucciones
    ctx.fillStyle = "white";
    ctx.font = "14px Arial";
    ctx.fillText("Usa las flechas para moverte y ESPACIO para saltar", 10, 20);
    ctx.fillText(`${niveles[currentLevel].nombre}`, 10, canvas.height - 10);
}

function actualizarJuego() {
    if (gameStarted) {
        aplicarGravedad();
        moverPersonaje();
        moverEnemigos();
        detectarColisiones();
        detectarMeta();
        dibujarJuego();
    }
    requestAnimationFrame(actualizarJuego);
}

function iniciarJuego() {
    gameStarted = true;
    cargarImagenes();
    updateLevelInfo();
    actualizarJuego();
}

function resetGame() {
    resetPlayerPosition();
}

function nextLevel() {
    if (currentLevel < 3) {
        currentLevel++;
        resetPlayerPosition();
        updateLevelInfo();
    }
}

function prevLevel() {
    if (currentLevel > 1) {
        currentLevel--;
        resetPlayerPosition();
        updateLevelInfo();
    }
}

// Iniciar el loop del juego
actualizarJuego();
</script>

</body>
</html>
